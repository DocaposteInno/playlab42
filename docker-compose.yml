services:
  dev:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: playlab42-dev
    # Utiliser l'UID/GID de l'utilisateur host pour les bons droits sur les fichiers
    user: "${LOCAL_UID:-1000}:${LOCAL_GID:-1000}"
    volumes:
      - .:/workspace
      - node_modules:/workspace/node_modules
    working_dir: /workspace
    ports:
      - "5242:5242"      # Application
    environment:
      - NODE_ENV=development
      # Home temporaire pour npm/node (Ã©vite les erreurs de permissions)
      - HOME=/tmp
      - npm_config_cache=/tmp/.npm
    networks:
      - playlab42-network

networks:
  playlab42-network:
    driver: bridge

volumes:
  node_modules:
