<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Impl√©menter avec /openspec:apply ‚Äî OpenSpec Guide</title>
  <link rel="stylesheet" href="/lib/theme.css">
  <link rel="stylesheet" href="/parcours/_shared/slide-base.css">
  <script type="module">
    import { initTheme } from '/lib/theme.js';
    initTheme();
  </script>
  <style>
    .command-box {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.08) 0%, rgba(118, 75, 162, 0.08) 100%);
      padding: var(--space-lg);
      border-radius: var(--radius-md);
      border-left: 4px solid var(--color-accent);
      font-family: var(--font-mono);
      margin: var(--space-lg) 0;
      font-size: 1.05rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .command-box strong {
      color: var(--color-accent);
    }
    .workflow-box {
      background: var(--color-bg-secondary);
      padding: var(--space-lg);
      border-radius: var(--radius-md);
      margin: var(--space-lg) 0;
      border: 1px solid var(--color-border);
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .workflow-box strong {
      color: var(--color-accent);
    }
    .task-example {
      background: var(--color-bg-secondary);
      padding: var(--space-lg);
      border-radius: var(--radius-md);
      margin: var(--space-lg) 0;
      font-family: var(--font-mono);
      font-size: 0.88rem;
      line-height: 1.6;
      border: 1px solid var(--color-border);
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .checklist {
      list-style: none;
      padding-left: 0;
      margin: var(--space-sm) 0;
    }
    .checklist li {
      margin: var(--space-xs) 0;
      line-height: 1.6;
    }
    .checklist li::before {
      content: "‚úì ";
      color: #28a745;
      font-weight: bold;
      margin-right: var(--space-xs);
    }
    .warning-box {
      background: #fff3cd;
      color: #856404;
      padding: var(--space-lg);
      border-radius: var(--radius-md);
      border-left: 4px solid #ffc107;
      margin: var(--space-lg) 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .warning-box strong {
      color: #856404;
    }
    .tip-box {
      background: #e8f4f8;
      color: #0c5460;
      padding: var(--space-lg);
      border-radius: var(--radius-md);
      border-left: 4px solid #17a2b8;
      margin: var(--space-lg) 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
    }
    .tip-box strong {
      color: #0c5460;
    }
  </style>
</head>
<body>
  <article class="slide">
    <h1>Impl√©menter avec /openspec:apply</h1>

    <p>Une fois la proposal valid√©e, passons √† l'impl√©mentation guid√©e par <code>tasks.md</code>.</p>

    <h2>Lancer l'impl√©mentation</h2>

    <div class="command-box">
      <strong>Avec un agent IA :</strong><br>
      /openspec:apply
    </div>

    <p>Ou manuellement :</p>

    <div class="command-box">
      <strong>Ouvrir le fichier tasks :</strong><br>
      code openspec/changes/[change-id]/tasks.md
    </div>

    <h2>Principe : Suivre tasks.md s√©quentiellement</h2>

    <div class="workflow-box">
      <p><strong>üìã R√®gle d'or</strong> : Les t√¢ches sont <strong>ordonn√©es</strong>. Chaque t√¢che pr√©pare la suivante.</p>
      <ul class="checklist">
        <li>Lire toutes les t√¢ches avant de commencer</li>
        <li>Impl√©menter t√¢che par t√¢che (pas de saut)</li>
        <li>Cocher <code>[x]</code> imm√©diatement apr√®s compl√©tion</li>
        <li>Tester r√©guli√®rement</li>
        <li>Commiter au fil de l'eau</li>
      </ul>
    </div>

    <h2>Exemple : tasks.md en cours d'impl√©mentation</h2>

    <div class="task-example">
# Tasks: add-poker-game

## Phase 1 : Pr√©paration
- [x] Cr√©er `games/poker/`
- [x] Ajouter `game.json` manifest
- [x] Cr√©er structure HTML
- [x] Ajouter assets (sprites cartes)

## Phase 2 : Moteur
- [x] Impl√©menter `engine.js` (init, actions, getPlayerView)
- [ ] <strong style="color: var(--color-accent);">‚Üê T√ÇCHE EN COURS</strong> Tests unitaires du moteur
- [ ] Validation spec game-engine

## Phase 3 : Bots
- [ ] Bot random
- [ ] Bot intermediate
- [ ] Tests des bots

## Phase 4 : Int√©gration
- [ ] Rebuild catalogue (`make build-catalogue`)
- [ ] Tests end-to-end
- [ ] Documentation README
    </div>

    <h2>Workflow d'impl√©mentation</h2>

    <ol>
      <li>
        <strong>Lire la t√¢che</strong>
        <p>Comprendre ce qui est attendu avant de coder.</p>
      </li>
      <li>
        <strong>Impl√©menter</strong>
        <p>√âcrire le code n√©cessaire, suivre les specs r√©f√©renc√©es.</p>
      </li>
      <li>
        <strong>Tester</strong>
        <p>Lancer <code>make test</code> et <code>make lint</code> pour valider.</p>
      </li>
      <li>
        <strong>Cocher la t√¢che</strong>
        <p>Modifier <code>tasks.md</code> : <code>- [ ]</code> ‚Üí <code>- [x]</code></p>
      </li>
      <li>
        <strong>Commiter</strong>
        <p>Message clair : <code>feat(poker): impl√©mentation moteur de jeu</code></p>
      </li>
      <li>
        <strong>Passer √† la suivante</strong>
        <p>R√©p√©ter le cycle.</p>
      </li>
    </ol>

    <h2>Documenter les d√©cisions dans design.md</h2>

    <p>Si vous devez faire des choix techniques importants non pr√©vus dans la proposal :</p>

    <div class="workflow-box">
      <p>Cr√©ez <code>openspec/changes/[change-id]/design.md</code> pour documenter :</p>
      <ul>
        <li>Choix d'algorithmes (ex: calcul du pot au poker)</li>
        <li>Trade-offs (performance vs lisibilit√©)</li>
        <li>Patterns utilis√©s (state machine, observer...)</li>
        <li>D√©cisions d'architecture non √©videntes</li>
      </ul>
    </div>

    <p><strong>Exemple de design.md :</strong></p>

    <div class="task-example">
# Design: add-poker-game

## Calcul du pot

**D√©cision** : Utiliser un tableau `pots[]` pour g√©rer les side-pots.

**Rationale** :
- Permet all-in avec plusieurs joueurs
- Conforme aux r√®gles officielles du poker
- Plus complexe mais plus correct qu'un pot unique

**Alternatives consid√©r√©es** :
- Pot unique (trop simple, incorrect)
- Calcul dynamique √† chaque tour (trop co√ªteux)

## Repr√©sentation des cartes

**D√©cision** : String `"As"` (rang + couleur)

**Rationale** :
- S√©rialisable JSON
- Lisible en debug
- Compatible avec assets nomm√©s `As.png`
    </div>

    <div class="warning-box">
      <p><strong>‚ö†Ô∏è Ne pas d√©vier du plan sans raison</strong></p>
      <p>Si vous d√©couvrez qu'une t√¢che est obsol√®te ou incompl√®te, documentez-le dans <code>design.md</code> ou mettez √† jour <code>tasks.md</code> en ajoutant une note.</p>
    </div>

    <h2>Utiliser les agents IA efficacement</h2>

    <div class="tip-box">
      <p><strong>üí° Astuce : Contexte maximal</strong></p>
      <p>Lorsque vous demandez √† un agent IA d'impl√©menter une t√¢che, donnez-lui :</p>
      <ul>
        <li>Le fichier <code>tasks.md</code> complet</li>
        <li>Les specs concern√©es (<code>@openspec/specs/game-engine/spec.md</code>)</li>
        <li>Le code existant √† modifier</li>
      </ul>
      <p>Exemple de prompt :</p>
      <pre><code>@claude Impl√©mente la t√¢che "Tests unitaires du moteur"
du fichier @openspec/changes/add-poker-game/tasks.md.
Utilise Jest et respecte @openspec/specs/game-engine/spec.md.</code></pre>
    </div>

    <h2>Commandes utiles pendant l'impl√©mentation</h2>

    <table>
      <thead>
        <tr>
          <th>Commande</th>
          <th>Usage</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>make test</code></td>
          <td>Lancer les tests Jest</td>
        </tr>
        <tr>
          <td><code>make lint</code></td>
          <td>V√©rifier la qualit√© du code</td>
        </tr>
        <tr>
          <td><code>make serve</code></td>
          <td>Tester un tool/game dans le navigateur</td>
        </tr>
        <tr>
          <td><code>make build-catalogue</code></td>
          <td>R√©g√©n√©rer le catalogue apr√®s ajout</td>
        </tr>
        <tr>
          <td><code>openspec show [change-id]</code></td>
          <td>Afficher l'√©tat d'avancement</td>
        </tr>
      </tbody>
    </table>

    <h2>Checklist avant de marquer "Termin√©"</h2>

    <ul class="checklist">
      <li>Toutes les t√¢ches de tasks.md sont coch√©es</li>
      <li>Tous les tests passent (<code>make test</code>)</li>
      <li>Le linter ne rapporte aucune erreur (<code>make lint</code>)</li>
      <li>La feature fonctionne en local (<code>make serve</code>)</li>
      <li>La documentation est √† jour (README, JSDoc)</li>
      <li>Les commits sont propres et descriptifs</li>
    </ul>

    <div class="tip-box">
      <p><strong>üéâ Changement impl√©ment√© ?</strong></p>
      <p>Avant de d√©ployer, assurez-vous de :</p>
      <ul>
        <li>Pousser votre branche : <code>git push -u origin feature/[change-id]</code></li>
        <li>Cr√©er une Pull Request</li>
        <li>Obtenir une review si n√©cessaire</li>
        <li>Merger et d√©ployer</li>
      </ul>
      <p>Une fois en production, vous pourrez archiver la proposal.</p>
    </div>

    <p style="margin-top: var(--space-xl); text-align: center;">
      <strong>Impl√©mentation termin√©e ? Apprenons √† archiver ! üëâ</strong>
    </p>
  </article>
</body>
</html>
