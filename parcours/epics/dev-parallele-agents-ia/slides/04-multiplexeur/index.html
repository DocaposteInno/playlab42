<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Supervision avec multiplexeur - D√©veloppement parall√®le avec agents IA</title>
  <link rel="stylesheet" href="../../../../../lib/theme.css">
  <link rel="stylesheet" href="../../../../_shared/slide-base.css">
  <script type="module">
    import { initTheme } from '../../../../../lib/theme.js';
    initTheme();
  </script>
  <style>
    .terminal-visual {
      background: #1a1b26;
      border-radius: var(--radius-lg);
      padding: var(--space-sm);
      margin: var(--space-lg) 0;
      font-family: 'JetBrains Mono', 'Fira Code', monospace;
    }
    .terminal-header {
      display: flex;
      gap: var(--space-xs);
      padding: var(--space-xs) var(--space-sm);
      margin-bottom: var(--space-sm);
    }
    .terminal-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
    }
    .terminal-dot.red { background: #ff5f56; }
    .terminal-dot.yellow { background: #ffbd2e; }
    .terminal-dot.green { background: #27c93f; }
    .terminal-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2px;
      background: #2a2b36;
    }
    .terminal-pane {
      background: #1a1b26;
      padding: var(--space-md);
      min-height: 100px;
    }
    .terminal-pane-header {
      color: #7aa2f7;
      font-size: var(--font-size-sm);
      margin-bottom: var(--space-sm);
    }
    .terminal-pane-content {
      color: #a9b1d6;
      font-size: 0.75rem;
      line-height: 1.4;
    }
    .tool-section {
      background: var(--color-bg-secondary);
      padding: var(--space-lg);
      border-radius: var(--radius-lg);
      margin: var(--space-lg) 0;
    }
    .tool-section h3 {
      margin-top: 0;
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }
    .tool-section.recommended {
      border-left: 4px solid var(--color-success);
    }
    .tool-section.alternative {
      border-left: 4px solid var(--color-info);
    }
    .code-block {
      background: var(--color-bg-code);
      border-radius: var(--radius-md);
      overflow: hidden;
      margin: var(--space-md) 0;
    }
    .code-block-header {
      background: var(--color-bg-secondary);
      padding: var(--space-sm) var(--space-md);
      font-size: var(--font-size-sm);
      color: var(--color-text-muted);
      border-bottom: 1px solid var(--color-border);
    }
    .code-block pre {
      margin: 0;
      padding: var(--space-md);
      overflow-x: auto;
      font-size: var(--font-size-sm);
    }
    .shortcuts-table {
      width: 100%;
      border-collapse: collapse;
      margin: var(--space-md) 0;
      font-size: var(--font-size-sm);
    }
    .shortcuts-table td, .shortcuts-table th {
      padding: var(--space-sm);
      border-bottom: 1px solid var(--color-border);
    }
    .shortcuts-table th {
      text-align: left;
      background: var(--color-bg-secondary);
    }
    .shortcuts-table code {
      background: var(--color-bg-code);
      padding: 2px 6px;
      border-radius: var(--radius-sm);
    }
    .orchestration-tools {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-md);
      margin-top: var(--space-lg);
    }
    .orchestration-card {
      background: var(--color-bg-secondary);
      padding: var(--space-lg);
      border-radius: var(--radius-lg);
      border: 1px solid var(--color-border);
    }
    .orchestration-card h4 {
      margin-top: 0;
      color: var(--color-accent);
    }
    .comment { color: var(--color-text-muted); }
  </style>
</head>
<body>
  <article class="slide">
    <h1>üñ•Ô∏è Superviser plusieurs agents : le multiplexeur terminal</h1>

    <p>
      Pour surveiller plusieurs agents en parall√®le, vous avez besoin de voir plusieurs terminaux simultan√©ment.
      C'est le r√¥le du <dfn>multiplexeur</dfn>.
    </p>

    <div class="terminal-visual">
      <div class="terminal-header">
        <div class="terminal-dot red"></div>
        <div class="terminal-dot yellow"></div>
        <div class="terminal-dot green"></div>
      </div>
      <div class="terminal-grid">
        <div class="terminal-pane">
          <div class="terminal-pane-header">Agent 1 - auth</div>
          <div class="terminal-pane-content">
            claude> Impl√©mentation OAuth...<br>
            ‚úì Created src/auth/oauth.ts<br>
            ‚úì Running tests...
          </div>
        </div>
        <div class="terminal-pane">
          <div class="terminal-pane-header">Agent 2 - api</div>
          <div class="terminal-pane-content">
            claude> Creating endpoints...<br>
            ‚úì Added POST /notifications<br>
            ‚è≥ Writing tests...
          </div>
        </div>
        <div class="terminal-pane">
          <div class="terminal-pane-header">Agent 3 - tests</div>
          <div class="terminal-pane-content">
            claude> Fixing test suite...<br>
            ‚úì Fixed 3 failing tests<br>
            ‚úì All 47 tests passing
          </div>
        </div>
        <div class="terminal-pane">
          <div class="terminal-pane-header">Monitor</div>
          <div class="terminal-pane-content">
            $ git worktree list<br>
            main      abc123 [main]<br>
            agent-1   def456 [auth]<br>
            agent-2   ghi789 [api]
          </div>
        </div>
      </div>
    </div>

    <div class="tool-section recommended">
      <h3>‚úÖ tmux <small>(recommand√©)</small></h3>

      <div class="code-block">
        <div class="code-block-header">~/.tmux.conf minimal pour multi-agents</div>
        <pre><code><span class="comment"># Pr√©fixe plus accessible</span>
set -g prefix C-a
unbind C-b
bind C-a send-prefix

<span class="comment"># Support souris</span>
set -g mouse on

<span class="comment"># Historique √©tendu</span>
set -g history-limit 50000

<span class="comment"># Layout 4 panes d'un coup</span>
bind A split-window -h \; split-window -v \; select-pane -t 0 \; split-window -v

<span class="comment"># Synchronisation (m√™me input dans tous les panes)</span>
bind S setw synchronize-panes</code></pre>
      </div>

      <table class="shortcuts-table">
        <tr><th>Raccourci</th><th>Action</th></tr>
        <tr><td><code>Ctrl-A A</code></td><td>Cr√©er un layout 4 panes</td></tr>
        <tr><td><code>Ctrl-A fl√®ches</code></td><td>Naviguer entre panes</td></tr>
        <tr><td><code>Ctrl-A S</code></td><td>Synchroniser l'input</td></tr>
        <tr><td><code>Ctrl-A d</code></td><td>D√©tacher (agents continuent)</td></tr>
        <tr><td><code>tmux attach</code></td><td>R√©attacher</td></tr>
      </table>
    </div>

    <div class="tool-section alternative">
      <h3>üìü GNU Screen <small>(si tmux n'est pas disponible)</small></h3>
      <p>Pr√©install√© sur beaucoup de serveurs.</p>

      <div class="code-block">
        <div class="code-block-header">bash</div>
        <pre><code>screen -S agents       <span class="comment"># Nouvelle session</span>
screen -r agents       <span class="comment"># R√©attacher</span>
Ctrl-A c               <span class="comment"># Nouveau terminal</span>
Ctrl-A n / Ctrl-A p    <span class="comment"># Terminal suivant/pr√©c√©dent</span>
Ctrl-A "               <span class="comment"># Liste des terminaux</span>
Ctrl-A d               <span class="comment"># D√©tacher</span></code></pre>
      </div>
    </div>

    <div class="tool-section alternative">
      <h3>ü¶é Zellij <small>(alternative moderne)</small></h3>
      <p>Configuration d√©clarative en KDL :</p>

      <div class="code-block">
        <div class="code-block-header">~/.config/zellij/layouts/agents.kdl</div>
        <pre><code>layout {
    tab name="Agent-1" cwd="../agent-1" { pane command="claude" }
    tab name="Agent-2" cwd="../agent-2" { pane command="claude" }
    tab name="Monitor" { pane command="watch" args="-n" "5" "git worktree list" }
}</code></pre>
      </div>
    </div>

    <h2>üéÆ Outils d'orchestration d√©di√©s</h2>
    <p>Si vous voulez aller plus loin, des outils sp√©cialis√©s existent :</p>

    <div class="orchestration-tools">
      <div class="orchestration-card">
        <h4>Claude Squad</h4>
        <p>TUI qui combine tmux + worktrees automatiquement.</p>
        <div class="code-block">
          <pre><code><span class="comment"># Installation</span>
brew install claude-squad  <span class="comment"># macOS</span>

<span class="comment"># Utilisation</span>
cs                    <span class="comment"># Interface TUI</span>
cs -p "aider"         <span class="comment"># Avec Aider</span></code></pre>
        </div>
      </div>

      <div class="orchestration-card">
        <h4>git-worktree-runner</h4>
        <p>Automatisation pouss√©e par CodeRabbit.</p>
        <div class="code-block">
          <pre><code>git gtr new feature/auth
git gtr ai feature/auth          <span class="comment"># Claude Code</span>
git gtr ai feature/auth --aider  <span class="comment"># Aider</span></code></pre>
        </div>
      </div>
    </div>
  </article>
</body>
</html>
